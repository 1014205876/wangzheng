<div class="has_win">
  <app-header title="订单详情" backIcon=1 backTxt="返回" hasBack="false"></app-header>
  <div class="box">
    <div class="item" *ngIf="obj">
      <div class="cur_item">
        <div class="left">申请信息</div>
        <div class="right">
          <span class="red_txt" *ngIf="obj.loanApply.status=='0'">处理中</span>
          <span class="red_txt" *ngIf="obj.loanApply.status=='1'">已终止</span>
          <span class="red_txt" *ngIf="obj.loanApply.status=='2'">已完成</span>
        </div>
      </div>

      <div class="item_txt">
        <div>订单号：{{obj.loanApply.no}}</div>
        <div>申请企业：{{obj.loanApply.etpName}}</div>
        <div>申请产品：{{obj.loanApply.productName}}</div>
        <div>申请金额：{{obj.loanApply.amount}}万元</div>
        <div>申请期限：{{obj.loanApply.term}}个月</div>
        <div>还款方式：{{obj.loanApply.repayMethod}}</div>
        <div>确认签约时间：{{transformTime(obj.loanApply.appointConfirmTime)}}</div>
        <div *ngFor="let item of obj.dataList">
          <div *ngFor="let control of item.controlList">
            <div *ngIf="control.type=='dateTime'">{{control.controlName}}：{{transformTime(control.value)}}</div>
            <div *ngIf="(control.type!='multiplePic')&&(control.type!='dateTime')">{{control.controlName}}：{{control.value}}</div>
            <div *ngIf="control.type=='multiplePic'">
              {{control.controlName}}：
              <div style='float:right;' [routerLink]="['/report-info']" [queryParams]="{'title': control.controlName,'value': control.value,'etpName':obj.loanApply.etpName}">查看</div>
            </div>
          </div>
        </div>
        <div>信息采集授权
          <div style='float:right;' (click)='getInfo(obj.loanApply.etpCerId)'>查看</div>
        </div>
      </div>
      <div class="cur_item" *ngIf="obj.loanContractInfo">
        <div class="left">核准信息</div>
      </div>
      <div class='item_txt' *ngIf='obj.loanContractInfo'>
        <div>
          <span class='left'>批复金额： </span>
          <span class='right'>{{obj.loanContractInfo.approvalAmount}}万元</span>
        </div>
        <div>
          <span class='left'>批复期限： </span>
          <span class='right'>{{obj.loanContractInfo.approvalTerm}}个月</span>
        </div>
        <div>
          <span class='left'>还款方式： </span>
          <span class='right'>{{obj.loanContractInfo.repayMethod}}</span>
        </div>
        <div>
          <span class='left'>核准利率（年化）： </span>
          <span class='right'>{{obj.loanContractInfo.loanRate}}%</span>
        </div>
        <div>
          <span class='left'>居间费率： </span>
          <span class='right'>{{obj.loanContractInfo.serviceRate}}%</span>
        </div>
      </div>
      <div class='cur_item'>
        <div class='left'>进度详情</div>
      </div>
      <div class='item_txt'>
        <div class='item_subtitle' style='overflow:hidden;'>
          <div style='width:50%;text-align:center;float:left;font-weight: bold;'>时间</div>
          <div style='width:50%;text-align:center;float:left;font-weight: bold;'>贷款进度</div>
        </div>
        <div style='overflow:hidden;'>
          <div style='width:50%;text-align:center;float:left;'>{{obj.loanApply.createDate}}</div>
          <div style='width:50%;text-align:center;float:left;'>申请成功</div>
        </div>
        <div *ngIf="obj.loanApply.status==1" style='overflow:hidden;'>
          <div style='width:50%;text-align:center;float:left;'>{{obj.loanApply.updateDate}}</div>
          <div style='width:50%;text-align:center;float:left;'>已终止</div>
        </div>
        <div *ngIf="obj.loanApply.status==2" style='overflow:hidden;'>
          <div style='width:50%;text-align:center;float:left;'>{{obj.loanApply.updateDate}}</div>
          <div style='width:50%;text-align:center;float:left;'>处理完成</div>
        </div>
      </div>
      <div class='cur_item' *ngIf="obj.loanApply.status==1">
        <div class='left'>终止原因</div>
      </div>
      <div class='item_txt' *ngIf="obj.loanApply.status==1">
        <div>
          <span class='left' style="color:#e64340;">{{obj.loanApply.reason}}</span>
        </div>
      </div>
      <div class="btn-area" *ngIf="obj.loanApply.status==1">
        <button class='cur_btn' (click)='reloan(obj)'>重新贷款</button>
      </div>
    </div>
  </div>
</div>