<app-breadcrumbs [breadcrumbs]="breadcrumbs"></app-breadcrumbs>
<nz-card class="card search-card">
  <div nz-row>
    <div class="gutter-box" nz-col nzSpan="6">
      <nz-form-item>
        <nz-form-label>问题标题</nz-form-label>
        <nz-form-control>
          <input nz-input placeholder="请输入问题标题" [(ngModel)]="searchItems.title">
        </nz-form-control>
      </nz-form-item>
    </div>
    <div class="gutter-box" nz-col nzSpan="6">
      <nz-form-item>
        <nz-form-label>&nbsp;</nz-form-label>
        <nz-form-control>
          <button class="m-r-20" nz-button nzType="primary" (click)="searchData(1)"><i nz-icon
              type="search"></i>查询</button>
          <button nz-button nzType="default" (click)="reset()"><i nz-icon type="close"></i>重置</button>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
</nz-card>
<nz-card class="card" [nzTitle]="'问题列表'" [nzExtra]="extraTitleTpl">
  <nz-table #basicTable class="data-table" [nzData]="rows" [nzSize]="'small'" [nzShowPagination]="false"
    [nzLoadingDelay]="loadingDelay">
    <thead>
      <tr>
        <th>问题名称</th>
        <th>未解决</th>
        <th>已解决</th>
        <th>更新日期</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of basicTable.data">
        <td>{{data.title}}</td>
        <td>{{data.unsolvedCount}}</td>
        <td>{{data.resolvedCount}}</td>
        <td>{{data.updateDate}}</td>
        <td>
          <button nz-button nzType="default" class="table-btn" (click)="modalTitle='编辑帮助';modalShow('edit',data)"><i
              nz-icon type="edit"></i>编辑</button>
          <button nz-button nzType="default" class="table-btn" nz-popconfirm nzTitle="是否确认删除这条问题？"
            (nzOnConfirm)="delete(data)" (nzOnCancel)="cancel()"><i nz-icon type="close"></i>删除</button>
        </td>
      </tr>
    </tbody>
  </nz-table>
  <app-page-nav [total]="page.total" [totalPage]="page.totalPage" [pageNum]="page.pageNum" [pageSize]="page.pageSize"
    (getCurrentPage)="changePage($event)">
  </app-page-nav>
</nz-card>
<ng-template #extraTitleTpl>
  <button nz-button nzType="primary" (click)="modalTitle='编辑帮助';modalShow('add')"><i nz-icon
      type="plus"></i>添加问题</button>
</ng-template>
<nz-modal [(nzVisible)]="show" [nzTitle]="modalTitle" (nzOnCancel)="modalCancel();" [nzFooter]="null">
  <form nz-form [formGroup]="modalForm" class="modal-form">
    <nz-form-item>
      <nz-form-label nzSpan="6" nzRequired nzFor="title">问题标题</nz-form-label>
      <nz-form-control nzSpan="16">
        <input formControlName="title" type="text" nz-input placeholder="请输入问题标题">
        <nz-form-explain *ngIf="modalForm.get('title').dirty && modalForm.get('title').errors">问题标题不能为空!
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzSpan="6" nzRequired nzFor="answer">问题回答</nz-form-label>
      <nz-form-control nzSpan="16">
        <textarea formControlName="answer" type="text" nz-input placeholder="请输入问题标题"></textarea>
        <nz-form-explain *ngIf="modalForm.get('answer').dirty && modalForm.get('answer').errors">问题标题不能为空!
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="18">
        <button nz-button (click)="modalCancel();resetForm($event)">取消</button>
        <button class="m-l-20" nz-button (click)="submitted($event)" nzType="primary"
          [disabled]="!modalForm.valid">确定</button>
      </nz-form-control>
    </nz-form-item>
  </form>
</nz-modal>