<app-breadcrumbs [breadcrumbs]="breadcrumbs"></app-breadcrumbs>
<nz-card class="card" [nzTitle]="'产品信息'">
  <div class="m-b-20" nz-row nzType="flex" nzJustify="space-between" nzAlign="middle">
    <div class="gutter-box" nz-col nzSpan="6">
      绑定产品：{{data.product.name}}
    </div>
    <div class="gutter-box" nz-col nzSpan="6">
      <a [routerLink]="['/app/business/product/info']" [queryParams]="{'id': data.id}">查看产品详细信息</a>
    </div>
  </div>
  <div nz-row nzType="flex" nzJustify="space-around" nzAlign="middle">
    <div class="gutter-box" nz-col nzSpan="6">产品编号：{{data.product.number}}</div>
    <div class="gutter-box" nz-col nzSpan="6">贷款期限（月）：{{data.product.minTerm}}-{{data.product.maxTerm}}</div>
    <div class="gutter-box" nz-col nzSpan="6">贷款金额（万）：{{data.product.minAmount}}-{{data.product.maxAmount}}</div>
    <div class="gutter-box" nz-col nzSpan="6">贷款利息（年化）：{{data.product.minRate}}%-{{data.product.maxRate}}%</div>
  </div>
</nz-card>
<nz-card class="card" [nzTitle]="'表单配置'">
  <div *ngFor='let list of data.group;let index=index'>
    <nz-card class="card" [nzTitle]="groupCardTitleTpl">
      <nz-table nzBordered [nzData]="list.formControlList" class="data-table" [nzPageSize]="list.formControlList.length"
        [nzSize]="'small'" [nzShowPagination]="false">
        <thead>
          <tr>
            <th>排序</th>
            <th>字段名称</th>
            <th>业务主键</th>
            <th>字段类型</th>
            <th>数据源</th>
            <th>提示信息</th>
            <th>是否必填</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor='let data of list.formControlList;let index=index'>
            <td>{{index+1}}</td>
            <td>{{data.controlName}}</td>
            <td>{{data.controlKey}}</td>
            <td>{{data.typeName}}</td>
            <td>{{data.dataSourceName}}</td>
            <td>{{data.placeInfo}}</td>
            <td>{{data.require?'必填':'非必填'}}</td>
          </tr>
        </tbody>
      </nz-table>
    </nz-card>
    <ng-template #groupCardTitleTpl>
      <div nz-row nzType="flex" nzJustify="start">
        <div class="gutter-box" nz-col [nzLg]="12" [nzMd]="12" [nzSm]="24" [nzXs]="24">
          分组名称：{{list.groupName}}
          <span *ngIf='list.groupShow' style='color: #f5222d; margin-left: 10px;'>(分页显示此分组)</span>
        </div>
      </div>
    </ng-template>
  </div>
</nz-card>
<nz-card *ngIf="data.state=='look'" class="card" [nzTitle]="'发布状态'">
  <div nz-row class="m-b-20">
    <div nz-col *ngIf='data.product.status==0'>待审核</div>
    <div nz-col *ngIf='data.product.status==1'>审核不通过</div>
    <div nz-col *ngIf='data.product.status==2'>已发布</div>
    <div nz-col *ngIf='data.product.status==3'>已下架</div>
  </div>
  <div nz-row>
    <div nz-col *ngIf="data.product.comments">审核意见：{{data.product.comments}}</div>
  </div>
</nz-card>
<nz-card *ngIf="data.state=='examine'" class="card" [nzTitle]="'发布审核'">
  <div nz-row nzType="flex" nzJustify="start" class="m-b-20">
    <nz-radio-group [(ngModel)]='data.examine.status'>
      <label nz-radio nzValue="2">审核通过</label>
      <label nz-radio nzValue="1">审核不通过</label>
    </nz-radio-group>
  </div>
  <div nz-row>
    <div nz-col class="m-b-10">审核建议：</div>
    <div nz-col><textarea rows="4" nz-input [(ngModel)]="data.examine.comments" placeholder="请输入审核建议"></textarea></div>
  </div>
</nz-card>
<div class="m-t-20 m-b-20" nz-row nzType="flex" nzJustify="center">
  <button nz-button nzType="default" (click)="back()">返回列表</button>
  <button class="m-l-20" *ngIf="data.state=='examine'" nz-button nzType="primary" (click)='submit()'>保存审批结果</button>
</div>