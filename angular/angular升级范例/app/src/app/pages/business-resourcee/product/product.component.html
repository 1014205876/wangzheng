<app-breadcrumbs [breadcrumbs]="['业务资源管理','产品管理']"></app-breadcrumbs>
<nz-card class="card search-card" [appResource]="{authName:'get/productGrid'}">
  <div nz-row>
    <div class="gutter-box" nz-col nzSpan="6">
      <nz-form-item>
        <nz-form-label>产品名称</nz-form-label>
        <nz-form-control>
          <input nz-input maxlength="20" placeholder="请输入产品名称" [(ngModel)]="searchItems.name">
        </nz-form-control>
      </nz-form-item>
    </div>
    <div class="gutter-box" nz-col nzSpan="6">
      <nz-form-item>
        <nz-form-label>产品编码</nz-form-label>
        <nz-form-control>
          <input nz-input maxlength="50" placeholder="请输入产品编码" [(ngModel)]="searchItems.number">
        </nz-form-control>
      </nz-form-item>
    </div>
    <div class="gutter-box" nz-col nzSpan="6">
      <nz-form-item>
        <nz-form-label>&nbsp;</nz-form-label>
        <nz-form-control>
          <button nz-button nzType="primary" (click)="search(1)"><i nz-icon nzType="search" nzTheme="outline"></i>查询</button>
          <button nz-button nzType="default" (click)="reset()"><i nz-icon nzType="close" nzTheme="outline"></i>重置</button>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
</nz-card>
<nz-card class="card" [nzTitle]="'产品列表'" [nzExtra]="extraTemplate">
  <nz-table #basicTable class="data-table" [nzData]="rows" [nzSize]="'small'" [nzShowPagination]="false"
    [nzLoadingDelay]="loadingDelay" [nzLoading]="loading" [nzBordered]="true">
    <thead>
      <tr>
        <th>产品名称</th>
        <th>产品编码</th>
        <th>贷款期限范围<br/>(月)</th>
        <th>贷款金额范围<br/>(万)</th>
        <th>综合费率范围<br/>(年化)</th>
        <th>更新时间</th>
        <th [appResource]="{authName:'patch/product/status'}">状态</th>
        <th [appResource]="{authName:'put/product'}">操作</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of basicTable.data">
        <td>{{data.name}}</td>
        <td>{{data.number}}</td>
        <td>{{data.term}}</td>
        <td>{{data.amount}}</td>
        <td>{{data.rate}}</td>
        <td class="td-center">{{data.updateDate}}</td>
        <td class="td-center" [appResource]="{authName:'patch/product/status'}">
          <nz-switch [ngModel]="data.status==1" (ngModelChange)="switchange(data)" [nzLoading]="loading"></nz-switch>
        </td>
        <td class="td-center" [appResource]="{authName:'put/product'}">
          <button nz-button nzType="default" class="table-btn" [routerLink]="['product-modify']" [queryParams]="{id: data.id}"><i nz-icon nzType="edit" nzTheme="outline"></i>编辑基础信息</button>
          <button nz-button nzType="default" class="table-btn" [routerLink]="['extended-disposed']" [queryParams]="{id: data.id,name: data.name}"><i nz-icon nzType="edit" nzTheme="outline"></i>扩展配置</button>
          <button nz-button nzType="default" class="table-btn" [routerLink]="['rate-disposed']" [queryParams]="{id: data.id,name: data.name}"><i nz-icon nzType="edit" nzTheme="outline"></i>费率配置</button>
          <button nz-button nzType="default" class="table-btn" [routerLink]="['product-material']" [queryParams]="{id: data.id,name: data.name}"><i nz-icon nzType="edit" nzTheme="outline"></i>产品资料</button>
        </td>
      </tr>
    </tbody>
  </nz-table>
  <app-page-nav [total]="page.total" [totalPage]="page.totalPage" [pageNum]="page.pageNum" [pageSize]="page.pageSize"
    (getCurrentPage)="changePage($event)">
  </app-page-nav>
</nz-card>
<ng-template #extraTemplate>
  <button [appResource]="{authName:'post/product'}" nz-button nzType="primary" class="tableBtn" [routerLink]="['product-add']"><i nz-icon nzType="plus" nzTheme="outline"></i>创建产品</button>
</ng-template>