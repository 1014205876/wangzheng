<div class="login noselect" style="background-image: url(assets/images/login.png)">
    <div class="flex max_width">
        <div class="slogan">
        </div>
        <div nz-row class="form">
            <div *ngIf="form.type==0" class="head" nz-col nzSpan="24">
                密码登录
                <span routerLink="/home">首页</span>
            </div>
            <div *ngIf="form.type==1" class="head" nz-col nzSpan="24">
                手机验证码登录
                <span routerLink="/home">首页</span>
            </div>
            <div class="gutter-box" nz-col nzSpan="24">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24" [nzValidateStatus]="(inputChange.userName&&!form.userName)?'error':''">
                        <nz-input-group [nzAddOnBefore]="tel">
                            <ng-template #tel>
                                <img class="form_icon" src="assets/images/icon/register_icon_01.png" alt="">
                            </ng-template>
                            <input type="text" nz-input placeholder="请输入手机号码" [(ngModel)]="form.userName"
                                (ngModelChange)="inputChange.userName=true" />
                        </nz-input-group>
                    </nz-form-control>
                    <nz-form-explain *ngIf="inputChange.userName&&!form.userName">请输入手机号码</nz-form-explain>
                </nz-form-item>
            </div>
            <div [hidden]="false" class="gutter-box" nz-col nzSpan="24">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24"
                        [nzValidateStatus]="(inputChange.imageCode&&!form.imageCode)?'error':''">
                        <div class="code">
                            <div class="input">
                                <nz-input-group [nzAddOnBefore]="gvcode">
                                    <ng-template #gvcode>
                                        <img class="form_icon" src="assets/images/icon/register_icon_02.png" alt="">
                                    </ng-template>
                                    <input type="text" nz-input placeholder="请输入验证码" [(ngModel)]="form.imageCode"
                                        (ngModelChange)="inputChange.imageCode=true;codeChange($event)" />
                                </nz-input-group>
                            </div>
                            <div class="btn getImgCode">
                                <app-gvcode #appCode [width]="gvCodeWidth" [height]="gvCodeHeight" [line]="1" [spot]="2"
                                    (click)="getgvCode()">
                                    <!-- width和height为btn宽高，由js自动获取
                                    line和spot为绘制的干扰线和点的个数 -->
                                </app-gvcode>
                            </div>
                        </div>
                    </nz-form-control>
                    <nz-form-explain *ngIf="inputChange.imageCode&&!form.imageCode">请输入图形验证码</nz-form-explain>
                </nz-form-item>
            </div>
            <div *ngIf="form.type==1" class="gutter-box" nz-col nzSpan="24">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24" [nzValidateStatus]="(inputChange.smsCode&&!form.smsCode)?'error':''">
                        <div class="code">
                            <div class="input">
                                <nz-input-group [nzAddOnBefore]="mscode">
                                    <ng-template #mscode>
                                        <img class="form_icon" src="assets/images/icon/register_icon_03.png" alt="">
                                    </ng-template>
                                    <input type="text" nz-input placeholder="请输入短信验证码" [(ngModel)]="form.smsCode"
                                        (ngModelChange)="inputChange.smsCode=true" />
                                </nz-input-group>
                            </div>
                            <div class="btn">
                                <button *ngIf="sendCd<=0" class="getCode" [disabled]="form.btnDisabled"
                                    (click)="getmsCode()">获取验证码</button>
                                <button *ngIf="sendCd>0" class="getCode" style="font-size:12px"
                                    disabled>{{sendCd}}s后可重发</button>
                            </div>
                        </div>
                    </nz-form-control>
                    <nz-form-explain *ngIf="inputChange.smsCode&&!form.smsCode">请输入短信验证码</nz-form-explain>
                </nz-form-item>
            </div>
            <div *ngIf="form.type==0" class="gutter-box" nz-col nzSpan="24">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24"
                        [nzValidateStatus]="(inputChange.password&&!form.password)?'error':''">
                        <nz-input-group [nzAddOnBefore]="passwd" [nzSuffix]="suffixTemplate">
                            <ng-template #passwd>
                                <img class="form_icon" src="assets/images/icon/register_icon_04.png" alt="">
                            </ng-template>
                            <input [type]="passwordVisible ? 'text' : 'password'" nz-input placeholder="请输入密码"
                                [(ngModel)]="form.password" (ngModelChange)="inputChange.password=true"
                                (keyup)="($event.which === 13)?formSubmit():''" />
                        </nz-input-group>
                        <ng-template #suffixTemplate>
                            <i nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                                (click)="passwordVisible = !passwordVisible"></i>
                        </ng-template>
                    </nz-form-control>
                    <nz-form-explain *ngIf="inputChange.password&&!form.password">请输入密码</nz-form-explain>
                </nz-form-item>
            </div>
            <div class="gutter-box" nz-col nzSpan="24">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24" [nzValidateStatus]="(inputChange.userName&&!form.userName)?'error':''">
                        <div class="forget">
                            <span *ngIf="form.type==1" (click)="form.type=0">密码登录</span>
                            <span *ngIf="form.type==0" (click)="form.type=1">手机验证码登录</span>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>
            <div class="gutter-box" nz-col nzSpan="24">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <button class="submit" nz-button nzType="primary" [nzLoading]="submitLoading" [disabled]="
                        !(
                            form.userName&&
                            form.imageCode&&
                            (
                                form.type==0&&
                                form.password
                            )||(
                                form.type==1&&
                                form.smsCode
                            )
                        )
                        " (click)="formSubmit()">登录</button>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>
    </div>
    <div class="copyright">{{copyright}}</div>
</div>