<app-menu [menu]="['规则模型','数据模型','查看字段']"></app-menu>
<nz-tabset [nzTabPosition]="'top'" [nzType]="'card'" [(nzSelectedIndex)]='tabindex' (nzSelectChange)='tabsChange($event)'>
    <nz-tab *ngFor="let tab of versions" [nzTitle]="tanTitle">
        <nz-card class="shadow" [nzTitle]="cardtitle" [nzExtra]="cardExtra" style='margin-top: -17px;'>
            <nz-table #nzTable [nzData]="tableData" [nzLoading]="loading" [nzShowPagination]="false" [nzFrontPagination]="false">
                <thead>
                    <tr>
                        <th nzWidth='40%'>字段名</th>
                        <th nzWidth='20%'>类型</th>
                        <th nzWidth='40%'>备注描述</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-template ngFor let-data [ngForOf]="nzTable.data">
                        <ng-template ngFor let-item [ngForOf]="expandDataCache[data.id]">
                            <tr *ngIf="(item.parent&&item.parent.expand)||!(item.parent)">
                                <td [nzIndentSize]="item.level*20" [nzShowExpand]="!!item.item.children&&item.item.children.length>0" [(nzExpand)]="item.expand"
                                    (nzExpandChange)="collapse(expandDataCache[data.id],item,$event)" style='text-align:left'>
                                    {{item.item.fieldName}}
                                </td>
                                <td>{{item.item.showType}}</td>
                                <td>{{item.item.fieldRemark}}</td>
                            </tr>
                        </ng-template>
                    </ng-template>
                </tbody>
            </nz-table>
        </nz-card>
        <ng-template #cardtitle>
            <span>
                返回字段
            </span>
        </ng-template>
        <ng-template #cardExtra>
            <span>
                <button nz-button nzType="primary" (click)='openall()'>展开全部</button>
                <button nz-button nzType="primary" (click)='closeall()'>收起全部</button>
            </span>
        </ng-template>
        <ng-template #tanTitle>
            <span>
                {{tab}}
            </span>
        </ng-template>
    </nz-tab>
</nz-tabset>