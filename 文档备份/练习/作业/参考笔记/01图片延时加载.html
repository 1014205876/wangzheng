<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>图片延时加载</title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}
			
			ul {
				list-style: none;
				width: 500px;
				margin: 0 auto;
			}
			
			ul li {
				position: relative;
				width: 100%;
				height: 1500px;
			}
			
			ul img {
				position: absolute;
				bottom: 0;
				width: 500px;
				height: 500px;
			}
		</style>
	</head>

	<body>
		<ul id="img_list">
			<li><img src="图片/作业图片/1.jpg" data-src="" /></li>
			<li><img src="图片/作业图片/1.jpg" data-src="" /></li>
			<li><img src="图片/作业图片/1.jpg" data-src="" /></li>
			<li><img src="图片/作业图片/1.jpg" data-src="" /></li>
		</ul>
		<script type="text/javascript">
			var lis = document.getElementsByTagName("li");
			var imgs = document.getElementsByTagName("img");
			//	var oBody=document.getElementsByTagName('body')[0];
			//	console.log(oBody.offsetParent);   null

			//为每一张图片添加自定义属性
			for(var i = 0; i < imgs.length; i++) {
				imgs[i].setAttribute('data-src', imgs[i].src);
				imgs[i].src = '';
			}

			window.onscroll = function(i) {
				//滚动高度
				var bodyScroll = document.body.scrollTop || document.documentElement.scrollTop;
				//可视区高度
				//				console.log(bodyScroll);
				var bodyHeight = document.documentElement.clientHeight;
				//								console.log(bodyHeight);
				var maxHeight = bodyScroll + bodyHeight;
				//								console.log(maxHeight);

				//				for(var i = 0; i < imgs.length; i++) {
				//					if(offset(imgs[i]) < maxHeight - 100)
				//					//如果条件满足，证明图片即将出现在可视区里
				//					{
				//						imgs[i].src = imgs[i].getAttribute("data-src");
				//					}
				//				}
				if1(0)
				if1(1)
				if1(2)
				if1(3)

				function if1(i) {
					if(maxHeight > imgtop(i) + 300) {
						imgs[i].src = imgs[i].getAttribute("data-src");
					}
				}
				//				if(maxHeight>imgtop(0))
				//				{
				//					imgs[0].src = imgs[0].getAttribute("data-src");
				//				}
				//				if(maxHeight>imgtop(1))
				//				{
				//					imgs[1].src = imgs[1].getAttribute("data-src");
				//				}
				//				if(maxHeight>imgtop(2))
				//				{
				//					imgs[2].src = imgs[2].getAttribute("data-src");
				//				}
				//				if(maxHeight>imgtop(0))
				//				{
				//					imgs[3].src = imgs[3].getAttribute("data-src");
				//				}

			}

			function imgtop(i) {
				var topimg = imgs[i].offsetTop + lis[i].offsetTop;
				return topimg;
			}

			//				if(maxHeight>topimg)
			//			function offset(obj) 
			//			{
			//				var top = 0;
			//				while(obj.offsetParent) 
			//				{
			//					top += obj.offsetTop;
			//					obj = obj.offsetParent;
			//				}
			//				return top;
			//			}
		</script>
	</body>

</html>