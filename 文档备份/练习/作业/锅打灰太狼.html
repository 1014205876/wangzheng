<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>wolf</title>
		<style>
			#gameWrap {
				width: 320px;
				height: 480px;
				box-shadow: 0 0 10px #333;
				margin: 160px auto 0;
				background: url(../img/game_bg.jpg);
				transform: scale(1.5);
				position: relative;
				/*背景图*/
			}
			
			#score {
				height: 45px;
				line-height: 45px;
				padding-left: 80px;
				color: #fff;
				font-size: 18px;
				text-shadow: 0 0 2px #000;
			}
			
			#progress {
				width: 180px;
				height: 16px;
				position: absolute;
				left: 63px;
				top: 66px;
				background: url(../img/progress.png) 0 0 no-repeat;
				background-size: 180px 16px;
				border-radius: 15px;
				/*红条*/
			}
			
			#wolfs {
				position: absolute;
				left: 0px;
				top: 108px;
			}
			
			.grayWolf {
				background: url(../img/grayWolf.png);
				background-position: 0px bottom;
			}
			
			.redWolf {
				background: url(../img/redWolf.png);
				background-position: 0px bottom;
			}
			
			#wolfs div {
				width: 108px;
				height: 101px;
				position: absolute;
				left: 18px;
				top: 52px;
			}
			
			#menu,
			#gameOver {
				position: absolute;
				left: 0;
				right: 0;
				bottom: 32%;
				text-align: center;
				font-size: 24px;
				font-weight: bold;
				color: #f60;
				text-shadow: 0 0 5px #ff0;
			}
			
			#menu p {
				cursor: pointer;
			}
			
			#gameOver {
				width: 100%;
				height: 100%;
				padding-top: 60%;
				box-sizing: border-box;
				bottom: 0;
				z-index: 2;
				background: rgba(0, 0, 0, 0.3);
				display: none;
			}
		</style>
	</head>

	<body>
		<div id="gameWrap">
			<div id="score">0</div>
			<div id="progress"></div>
			<div id="wolfs">
				<!--<div class="Wolf grayWolf"></div>-->
			</div>
			<div id="menu">
				<p id="start">开始游戏</p>
				<p id="info">游戏说明</p>
			</div>
			<div id="gameOver">
				<p>游戏结束</p>
				<p></p>
			</div>
		</div>

		<script>
			var progressBar = document.getElementById("progress"); //倒计时进度条	
			var wolfBox = document.getElementById("wolfs");
			var scoreEle = document.getElementById("score");
			var gameOver = document.getElementById("gameOver");
			var start = document.getElementById('start');
			var score = 0;
			var timer2=null;
			var pos =
				[
					{x: 18,y: 52},
					{x: 98,y: 8},
					{x: 186,y: 35},
					{x: 15,y: 114},
					{x: 104,y: 84},
					{x: 200,y: 104},
					{x: 32,y: 186},
					{x: 120,y: 166},
					{x: 208,y: 188}
				];
				var timer1=null;
				
				start.onclick=function()
				{
					this.parentNode.style.display='none';
					gameStart();
					progressFn();
				}
				
				
				function gameStart()
				{
					timer1=setInterval(function()
					{
						creatWolf();
					},1000)
				}
				
				function creatWolf()
				{
					var oDiv=document.createElement('div');
					oDiv.clicked=true;
					var num=rand(0,100);
					oDiv.className=num>50?'redWolf':'grayWolf';
					wolfBox.appendChild(oDiv);
					wolfplay(oDiv);
					oDiv.onclick=function()
					{
						hitWolf(this);
					}
				}
				
				function hitWolfMv(wolf)
				{
					var i=6;
					clearInterval(wolf.endtime);
					clearInterval(wolf.entertimer);
					wolf.endtime=setInterval(function()
					{
						wolf.style.backgroundPosition=-108*i+'px';
						i++;
						if(i>=10)
						{
							wolfBox.removeChild(wolf);
							clearInterval(wolf.endtime);
						}
					},100)
				}
				
				function hitWolf(obj)
				{
					if(obj.clicked)
					{
						if(obj.className=='grayWolf')
						{
							score+=10;
						}
						if(obj.className=='redWolf')
						{
							score-=10;
						}
						scoreEle.innerHTML=score;
						obj.clicked=false
						hitWolfMv(obj);
					}
				}
				
				function wolfplay(wolf)
				{
					var index=rand(0,pos.length);
					var x=pos[index].x;
					var y=pos[index].y;
					wolf.style.left=x+'px';
					wolf.style.top=y+'px';
					var i=0;
					var n=1;
					wolf.entertimer=setInterval(function()
					{
						wolf.style.backgroundPosition=-108*i+'px';
						i+=n;
						if(i==6)
						{
							n=-1
							i+=n;
						}
						if(i<0)
						{
							clearInterval(wolf.entertimer);
							if(wolf.className=='redWolf')
							{
								score+=10;
								scoreEle.innerHTML=score;
							}
							wolfBox.removeChild(wolf);
						}
					},80)
				}
				
				function rand(x,y)
				{
					return Math.floor(Math.random()*(y-x)+x);
				}
				
				function progressFn()
				{
					var percent=progressBar.offsetWidth;
					var percentTimer=setInterval(function()
					{
						percent--;
						if(percent<=0)
						{
							clearInterval(percentTimer);
						}
						progressBar.style.width=percent+'px';
					},100)
				}
				
//				function gameover()
//				{
//					gameOver.style.createElement('div');
//					oDiv.clicked=ture;
//					var num=
//				}
				
//				function gameOver1()
//				{
//					timer2=setInterval(function()
//					{
//						var long1=progressBar.offsetWidth;
//						long1-=10;
//						progressBar.style.width=long1+'px';
//						if(long1<=0)
//						{
//	//						alert('游戏结束');
//							clearInterval(time2);
//						}
//					},1000)
//				}
				
				
				
		</script>
		<!--<script>
			var start1=document.getElementById('start');
			var info1=document.getElementById('info');
			var menu1=document.getElementById('menu');
			var progress=document.getElementById('progress');
			var time1=null;
			
			start1.onclick=function()
			{
				clearInterval(time1);
				time1=setInterval(function()
				{
					var long1=progress.offsetWidth;
					long1-=10;
					progress.style.width=long1+'px';
					if(long1<=0)
					{
						clearInterval(time1);
					}
					console.log(long1)
				},100)
				
				yincang();
			}
			
			function yincang()
			{
				menu1.style.display='none';
			}
			
		</script>-->

	</body>

</html>