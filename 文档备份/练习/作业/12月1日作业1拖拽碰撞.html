<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			*{
				margin:0px;
				padding:0px;
			}
			#a{
				width:100px;
				height:100px;
			/*	border-radius: 500px;*/
				background:red;
				position:absolute;
				z-index: 1;
			}
			#b{
				width:200px;
				height:200px;
			/*	border-radius: 500px;*/
				background:blue;
				position:absolute;
				top:150px;
				left:150px;
			}
			#c{
				width:250px;
				height:250px;
			/*	border-radius: 500px;*/
				background:blue;
				position:absolute;
				left:350px;
				top:200px;
			}
		</style>
	</head>
	<body>
		<div id='a'></div>
		<div id='b'></div>
		<div id='c'></div>
		<script>
			var a=document.getElementById('a');
			var b=document.getElementById('b');
			var x1=0;
			var y1=0;
			var left1=0;
			var top1=0;//设定四个全局变量,用来计算移动距离
			function aFn(event)//点击下去时触发鼠标移动事件
			{
				var event=event||window.event;
				x1=event.clientX;
				y1=event.clientY;//获得点击时候的鼠标坐标
				
				left1=a.offsetLeft;
				top1=a.offsetTop;//获取点击时候div的坐标
				document.addEventListener('mousemove',cFn,false);
			}
		
			function bFn()//放手时移除鼠标移动事件
			{
				document.removeEventListener('mousemove',cFn,false);
			}

			function cFn(event)//鼠标移动事件
			{
				var event=event||window.event;
				
				var x2=event.clientX||event.clientLeft;
				var y2=event.clientY||event.clientTop;//获得鼠标移动时候的鼠标坐标
				
				var left2=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;
				var top2=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;
				
				var leftmove=left1+x2-x1;
				var topmove=top1+y2-y1
				
				if(leftmove<=0)
				{
					leftmove=0;
				}
				if(leftmove>=left2)
				{
					leftmove=left2;
				}
				if(topmove<=0)
				{
					topmove=0
				}
				if(topmove>=top2)
				{
					topmove=top2;
				}
					
				a.style.left=leftmove+'px';
				a.style.top=topmove+'px';//前后鼠标坐标差+原始坐标等于div当前坐标
				
				
				if(leftmove>=b.offsetLeft-a.offsetWidth&&leftmove<=b.offsetLeft+b.offsetWidth&&topmove>=b.offsetTop-a.offsetHeight&&topmove<=b.offsetTop+b.offsetHeight)
				{
					b.style.backgroundColor='green';
				}
				else{
					b.style.backgroundColor='blue';
				}
				
				if(leftmove>=c.offsetLeft-a.offsetWidth&&leftmove<=c.offsetLeft+c.offsetWidth&&topmove>=c.offsetTop-a.offsetHeight&&topmove<=c.offsetTop+c.offsetHeight)
				{
					c.style.backgroundColor='green';
				}
				else{
					c.style.backgroundColor='blue';
				}

//				var arx=a.offsetLeft+a.offsetWidth/2;
//				var ary=a.offsetTop+a.offsetHeight/2;
//				
//				var brx=b.offsetLeft+b.offsetWidth/2;
//				var bry=b.offsetTop+b.offsetHeight/2;
//
//				var crx=c.offsetLeft+c.offsetWidth/2;
//				var cry=c.offsetTop+c.offsetHeight/2;
//
//				var atobx=(brx-arx)*(brx-arx);
//				var atoby=(bry-ary)*(bry-ary);
//				var atobz=Math.sqrt(atobx+atoby);
//
//				if(atobz<=a.offsetWidth*0.5+b.offsetWidth*0.5)
//				{
//					b.style.backgroundColor='green';
//				}
//				else{
//					b.style.backgroundColor='blue';
//				}
//
//				var atocx=(crx-arx)*(crx-arx);
//				var atocy=(cry-ary)*(cry-ary);
//				var atocz=Math.sqrt(atocx+atocy);
//
//				if(atocz<=a.offsetWidth*0.5+c.offsetWidth*0.5)
//				{
//					c.style.backgroundColor='green';
//				}
//				else{
//					c.style.backgroundColor='blue';
//				}

			}
			
			a.addEventListener('mousedown',aFn,false);//调用函数aFn(点击的瞬间触发事件)
			document.addEventListener('mouseup',bFn,false);//调用函数bFn(放手的瞬间触发事件)
		</script>
	</body>
</html>
