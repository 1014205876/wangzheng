<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>轮播图2</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
	<link rel="stylesheet" href="reset.css">
	<style>
		#outer{
			width:386px;
			height:272px;
			border:2px solid red;
			overflow:hidden;
			position:relative;
			margin:50px auto;
		}
		#inner{
			width:386px;
			height:272px;
			overflow:scroll;
		}
		#tu{
			width:8000px;
			height:272px;
			overflow:hidden;
		}
		#tu img{
			width:386px;
			height:272px;
			float: left;
		}
		#num{
			width:250px;
			height:40px;
			overflow:hidden;
			position: absolute;
			left:64px;
			bottom:30px;
		}
		#num li{
			width:40px;
			height:40px;
			background:#ccc;
			text-align:center;
			line-height:40px;
			font-size:28px;
			margin-right: 10px;
			float: left;	
		}
		#num .color{
			background:red;
			color:white;
		}
		#left{
			width:25px;
			height:24px;
			background:url(images/fx1.png) 0px 0px no-repeat;
			position:absolute;
			left:0px;
			top:120px;
		}
		#right{
			width:25px;
			height:24px;
			background:url(images/fx2.png) 0px 0px no-repeat;
			position:absolute;
			right:0px;
			top:120px;
		}
	</style>
</head>
<body>
	<div id="outer">
		<div id="inner">
			<div id="tu">
				<img src="images/05.jpg" alt="">
				<img src="images/01.jpg" alt="">
				<img src="images/02.jpg" alt="">
				<img src="images/03.jpg" alt="">
				<img src="images/04.jpg" alt="">
				<img src="images/05.jpg" alt="">
				<img src="images/01.jpg" alt="">
			</div>
			<ul id="num">
				<li class="color">1</li>
				<li>2</li>
				<li>3</li>
				<li>4</li>
				<li>5</li>
			</ul>
			<p id="left"></p>
			<p id="right"></p>
		</div>
	</div>
</body>
<script>
	var inner=document.getElementById('inner');
	var tu=document.getElementById('tu');
	var num=document.getElementById('num');
	var left=document.getElementById('left');
	var right=document.getElementById('right');
	var imgs=tu.getElementsByTagName('img');
	var lis=num.getElementsByTagName('li');
	var time1=null,time2=null;
	var a=1,b=0;//a用来存储图片的下标，b存储数字下标
	//一张图片的运动过程
	inner.scrollLeft=imgs[0].offsetWidth;
	function move(){
		var start=inner.scrollLeft;
		var end=imgs[0].offsetWidth*a;
		var minstep=0;
		var maxstep=30;
		var cha1=end-start;
		var cha2=maxstep-minstep;
		var everystep=cha1/cha2;
		clearInterval(time1);
		time1=setInterval(function(){
			minstep++;
			if(minstep>=30){
				clearInterval(time1);
			}
			start+=everystep;
			inner.scrollLeft=start;
		},30)
		for(var i=0;i<lis.length;i++){
			lis[i].className='';
		}
		lis[b].className='color';
	}
	//图片自动走
	function automove(){
		a++;
		if(a>=imgs.length){
			a=2;
			inner.scrollLeft=imgs[0].offsetWidth;
		}
		b++;
		if(b>=lis.length){
			b=0;
		}
		move();
	}
	time2=setInterval(automove,2000)
	//点击左边按钮
	left.onclick=function(){
		clearInterval(time2);
		a--;
		if(a<0){
			a=imgs.length-3;
			inner.scrollLeft=imgs[0].offsetWidth*(a+1);
		}
		b--;
		if(b<0){
			b=lis.length-1;
		}
		move();
		time2=setInterval(automove,2000);
	}
	//点击右边按钮
	right.onclick=function(){
		clearInterval(time2);
		a++;
		if(a>=imgs.length){
			a=2;
			inner.scrollLeft=imgs[0].offsetWidth;
		}
		b++;
		if(b>=lis.length){
			b=0;
		}
		move();
		time2=setInterval(automove,2000);
	}
	//点击数字
	for(var i=0;i<lis.length;i++){
		lis[i].onclick=function(){
			clearInterval(time2);
			for(var i=0;i<lis.length;i++){
				if(lis[i]==this){
					a=i+1;
					b=i;
					move();
					time2=setInterval(automove,2000);
				}
			}
		}
	}
</script>
</html>
